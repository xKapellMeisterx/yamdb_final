# Групповой проект «Yamdb»
yamdb_final
![example workflow](https://github.com/xKapellMeisterx/yamdb_final/actions/workflows/yamdb_workflow.yml/badge.svg)

Ссылка на статику:
http://178.154.202.139/redoc/

## Описание:

Проект YaMDb собирает отзывы (Review) пользователей на произведения (Titles).
Произведения делятся на категории: «Книги», «Фильмы», «Музыка». Список категорий (Category) может быть расширен (например можно добавлять категорию "Изобразительное исскуство" или "Ювелирка").

Сами произведения в YaMDb не хранятся, здесь нельзя посмотреть фильм или послушать музыку.

В каждой категории есть произведения: книги, фильмы или музыка.
Например, в категории «Книги» могут быть произведения «Винни Пух и все-все-все» и «Марсианские хроники», а в категории «Музыка» -песня "Давеча" группы "Насекомые" и сторая сюита Баха.
Произведению может быть присвоен жанр (Genre) из списка предустановленных (например, «Сказка», «Рок» или «Артхаус»). Новые жанры может создавать только администратор.

Благодарные или возмущённые читатели оставляют к произведениям текстовые отзывы (Review) и выставляют произведению рейтинг (оценку в диапазоне от одного до десяти).
Из множества оценок высчитывается средняя оценка произведения.

## Функционал:

#### REVIEWS

1. Получить список всех отзывов
2. Создать новый отзыв
3. Получить отзыв по id
4. Частично обновить отзыв по id
5. Удалить отзыв по id

#### COMMENTS

1. Получить список всех комментариев к отзыву по id
2. Создать новый комментарий для отзыва
3. Получить комментарий для отзыва по id
4. Частично обновить комментарий к отзыву по id
5. Удалить комментарий к отзыву по id

#### AUTH

1. Отправление confirmation_code на переданный email
2. Получение JWT-токена в обмен на email и confirmation_code

#### USERS

1. Получить список всех пользователей
2. Создание пользователя
3. Получить пользователя по username
4. Изменить данные пользователя по username
5. Удалить пользователя по username
6. Получить данные своей учетной записи
7. Изменить данные своей учетной записи

#### CATEGORIES

1. Получить список всех категорий
2. Создать категорию
3. Удалить категорию

#### GENRES

1. Получить список всех жанров
2. Создать жанр
3. Удалить жанр

#### TITLES

1. Получить список всех объектов
2. Создать произведение для отзывов
3. Информация об объекте
4. Обновить информацию об объекте
5. Удалить произведение

####Документация к API доступна по адресу `http://127.0.0.1:8000/redoc/`

## Установка
##### Шаг 1. Проверьте установлен ли у вас Docker
Прежде, чем приступать к работе, необходимо знать, что Docker установлен. Для этого достаточно ввести:
```bash
docker -v
```
Или скачайте [Docker Desktop](https://www.docker.com/products/docker-desktop) для Mac или Windows. [Docker Compose](https://docs.docker.com/compose) будет установлен автоматически. В Linux убедитесь, что у вас установлена последняя версия [Compose](https://docs.docker.com/compose/install/). Также вы можете воспользоваться официальной [инструкцией](https://docs.docker.com/engine/install/).

##### Шаг 2. Клонируйте репозиторий себе на компьютер
Введите команду:
```bash
git clone https://github.com/DenisSivko/infra_sp2.git
```

##### Шаг 3. Создайте в клонированной директории файл .env
Пример:
```bash
DB_ENGINE=django.db.backends.postgresql
DB_NAME=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
DB_HOST=db
DB_PORT=5432
```

##### Шаг 4. Запуск docker-compose
Для запуска необходимо выполнить из директории с проектом команду:
```bash
docker-compose up -d
```

##### Шаг 5. База данных
Создаем и применяем миграции:
```bash
docker-compose exec web python manage.py makemigrations --noinput
docker-compose exec web python manage.py migrate --noinput
```

##### Шаг 6. Подгружаем статику
Выполните команду:
```bash
docker-compose exec web python manage.py collectstatic --no-input 
```

##### Шаг 7. Заполнение базы тестовыми данными
Для заполнения базы тестовыми данными вы можете использовать файл fixtures.json, который находится в infra_sp2. Выполните команду:
```bash
docker-compose exec web python manage.py loaddata fixtures.json
```

##### Другие команды
Создание суперпользователя:
```bash
docker-compose exec web python manage.py createsuperuser
```

Остановить работу всех контейнеров можно командой:
```bash
docker-compose down
```

Для пересборки и запуска контейнеров воспользуйтесь командой:
```bash
docker-compose up -d --build 
```

Мониторинг запущенных контейнеров:
```bash
docker stats
```

Останавливаем и удаляем контейнеры, сети, тома и образы:
```bash
docker-compose down -v
```
